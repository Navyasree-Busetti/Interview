<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HVAC Duct Sizing Calculator</title>
    <style>
        /* Global Styling */
        :root {
            --black: #222831;
            --grey: #393E46;
            --teal: #00ADB5;
            --dark: rgb(34, 40, 49);
            --space: rgb(57, 62, 70);
            --light: #F5F5F5;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--light);
            margin: 0;
            padding: 0;
            color: var(--dark);
        }

        .container {
            max-width: 900px;
            margin: auto;
            padding: 20px;
        }

        input:focus-visible,
        select:focus-visible {
            outline: none;
        }

        input:focus-visible {
            border: 1.5px solid var(--teal);
        }

        h1 {
            text-align: center;
            color: var(--teal);
            margin-bottom: 20px;
            position: relative;
        }

        .currency-select,
        .language-select {
            height: fit-content;
        }

        .theme-toggle {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .currency-select {
            right: 50px;
        }

        .language-select {
            right: 0;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 15px;
        }

        .form-group label {
            font-weight: bold;
            margin-bottom: 5px;
        }

        input,
        select {
            padding: 10px;
            border: 1px solid var(--grey);
            border-radius: 5px;
            font-size: 16px;
        }

        /* Button Styling */
        .btn {
            padding: 10px;
            font-size: 16px;
            background-color: var(--teal);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            background-color: var(--space);
        }

        /* Card Styling */
        .results-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }

        .card {
            flex: 1 1 calc(30% - 20px);
            padding: 15px;
            border: 1px solid var(--grey);
            border-radius: 10px;
            background-color: var(--light);
            text-align: center;
            box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;
                        transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .card h3 {
            color: var(--teal);
            margin-bottom: 10px;
        }

        .card p {
            margin: 5px 0;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
        }

        /* Price Layout */
        .priceLay {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 30px;
            padding: 15px;
            border: 1px solid var(--grey);
            border-radius: 10px;
            background-color: var(--light);
            box-shadow: 0 4px 8px var(--shadow);
        }

        .lineItemCard {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .priceResult {
            text-align: center;
            background-color: var(--teal);
            color: white;
            padding: 15px;
            border-radius: 10px;
        }

        .priceResult p {
            font-size: 20px;
            margin: 0;
        }


        /* Highlight Selected Card */
        .card.selected {
            background-color: var(--teal);
            color: white;
        }

        .card.selected h3 {
            color: white;
        }

        /* Dark Mode Styling */
        body.dark-mode {
            background-color: var(--dark);
            color: var(--light);
        }

        body.dark-mode .card {
            background-color: var(--grey);
            border-color: var(--space);
        }

        body.dark-mode .card.selected {
            background-color: var(--teal);
            color: var(--dark);
        }

        body.dark-mode .card.selected h3 {
            color: var(--dark);
        }

        body.dark-mode .priceLay {
            background-color: var(--grey);
            border-color: var(--space);
        }

        body.dark-mode .btn {
            background-color: var(--space);
        }

        body.dark-mode .btn:hover {
            background-color: var(--teal);
        }

        body.dark-mode .priceResult {
            background-color: var(--teal);
            color: var(--dark);
        }

        /* Responsive Styling */
        @media (max-width: 768px) {
            .results-container {
                flex-direction: column;
            }

            .card {
                flex: 1 1 100%;
            }

            .theme-toggle {
                justify-content: center;
            }

            .currency-select,
            .language-select {
                width: 100%;
                margin-bottom: 10px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 24px;
            }

            input,
            select {
                font-size: 14px;
            }

            .btn {
                font-size: 14px;
            }

            .priceResult p {
                font-size: 18px;
            }
        }
    </style>

</head>

<body>
<div class="container">
    <div style="display: flex;justify-content: space-between;align-items: center;">
        <h1 id="header-title" style="color:var(--teal);">HVAC Duct Sizing Calculator</h1>
        <div style="display: flex;gap: 8px;">
            <select style="font-size: 12px;padding: 6px;" id="currency" class="currency-select"
                    onchange="updateCurrency()">
                <option value="$">USD</option>
                <option value="€">EUR</option>
                <option value="£">GBP</option>
                <option value="¥">JPY</option>
            </select>
            <select style="font-size: 12px;padding: 6px;" id="language" class="language-select"
                    onchange="updateLanguage()">
                <option value="en">English</option>
                <option value="es">Español</option>
                <option value="fr">Français</option>
                <option value="de">Deutsch</option>
            </select>
            <div class="theme-toggle" onclick="toggleTheme()">
                <img id="theme-icon" src="https://d29fhpw069ctt2.cloudfront.net/icon/image/74251/preview.svg"
                     alt="Toggle Theme" width="32" height="32">
            </div>
        </div>
    </div>
    <div id="ductForm">
        <div class="form-group">
            <label for="velocity" id="label-velocity">Max Velocity:</label>
            <div style="display:flex;width:100%;border: 1px solid var(--grey);border-radius: 5px;">
                <input
                        style="width:50%;border: 0px;border-radius: 5px 0px 0px 5px;border-right: 1px solid var(--grey);"
                        min="1"
                        type="number" id="velocity" value="3" placeholder="Enter velocity">
                <select style="width:50%;border: 0px;border-radius-[]: 0px 5px 5px 0px;" id="velocityUnit">
                    <option value="mps" selected>m/s</option>
                    <option value="fpm">FPM</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="flowRate" id="label-flowRate">Flow Rate:</label>
            <div style="display:flex;width:100%;border: 1px solid var(--grey);border-radius: 5px;">
                <input
                        style="width:50%;border: 0px;border-radius: 5px 0px 0px 5px;border-right: 1px solid var(--grey);"
                        type="number" id="flowRate" value="5" placeholder="Enter flow rate">
                <select style="width:50%;border: 0px;border-radius: 0px 5px 5px 0px;" id="flowRateUnit">
                    <option value="ls" selected>L/s</option>
                    <option value="cfm">CFM</option>
                    <option value="gpm">GPM</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="outputUnit" id="label-outputUnit">Output Unit:</label>
            <select id="outputUnit" onchange="updateOutputUnit()">
                <option value="in">Inches</option>
                <option value="cm">Centimeters</option>
            </select>
        </div>
    </div>

    <!-- Results Container -->
    <div class="results-container">
        <div class="card" id="circularDuct" onclick="selectDuct('circularDuct')">
            <h3 id="circularDuctTitle">Circular Duct Size</h3>
            <p>Diameter: <span id="circularDuctDiameter">0</span> <span class="outputUnitLabel">in</span></p>
            <p>Area: <span id="circularDuctArea">0</span> sq <span class="outputUnitLabel">in</span></p>
        </div>
        <div class="card" id="rectangularDuct" onclick="selectDuct('rectangularDuct')">
            <h3 id="rectangularDuctTitle">Rectangular Duct Size</h3>
            <p>Height: <span id="rectangularDuctHeight">0</span> <span class="outputUnitLabel">in</span></p>
            <p>Width: <span id="rectangularDuctWidth">0</span> <span class="outputUnitLabel">in</span></p>
            <p>Area: <span id="rectangularDuctArea">0</span> sq <span class="outputUnitLabel">in</span></p>
        </div>
        <div class="card" id="squareDuct" onclick="selectDuct('squareDuct')">
            <h3 id="squareDuctTitle">Square Duct Size</h3>
            <p>Side: <span id="squareDuctSide">0</span> <span class="outputUnitLabel">in</span></p>
            <p>Area: <span id="squareDuctArea">0</span> sq <span class="outputUnitLabel">in</span></p>
        </div>
    </div>

    <!-- Price Layout -->
    <div class="priceLay">
        <div class="lineItemCard">
            <label for="ductLength" id="label-ductLength">Duct Length (in selected unit):</label>
            <input type="number" id="ductLength" value="30">
            <label for="ductPrice" id="label-ductPrice">Price Per Unit Area:</label>
            <input type="number" id="ductPrice" value="20">
        </div>
        <div class="priceResult">
            <p style="font-weight: bold; margin-bottom: 4px;" id="totalDuctPriceLabel">Total Duct Price</p>
            <p id="totalDuctPrice">0</p>
        </div>
    </div>
</div>

<script>
    function toggleTheme() {
        const body = document.body;
        body.classList.toggle("dark-mode");
        const themeIcon = document.getElementById("theme-icon");
        themeIcon.src = body.classList.contains("dark-mode") ?
            "https://d29fhpw069ctt2.cloudfront.net/icon/image/49197/preview.svg" :
            "https://d29fhpw069ctt2.cloudfront.net/icon/image/74251/preview.svg";
    }

    let lastResults = {};
    let selectedDuct = "circularDuct";
    let selectedCurrency = "$";
    let selectedLanguage = "en";

    const translations = {
        en: {
            headerTitle: "HVAC Duct Sizing Calculator",
            labelVelocity: "Max Velocity:",
            labelFlowRate: "Flow Rate:",
            labelOutputUnit: "Output Unit:",
            circularDuctTitle: "Circular Duct Size",
            rectangularDuctTitle: "Rectangular Duct Size",
            squareDuctTitle: "Square Duct Size",
            labelDuctLength: "Duct Length (in selected unit):",
            labelDuctPrice: "Price Per Unit Area:",
            totalDuctPriceLabel: "Total Duct Price"
        },
        es: {
            headerTitle: "Calculadora de Tamaño de Conductos HVAC",
            labelVelocity: "Velocidad Máxima:",
            labelFlowRate: "Caudal:",
            labelOutputUnit: "Unidad de Salida:",
            circularDuctTitle: "Tamaño del Conducto Circular",
            rectangularDuctTitle: "Tamaño del Conducto Rectangular",
            squareDuctTitle: "Tamaño del Conducto Cuadrado",
            labelDuctLength: "Longitud del Conducto (en unidad seleccionada):",
            labelDuctPrice: "Precio por Unidad de Área:",
            totalDuctPriceLabel: "Precio Total del Conducto"
        },
        fr: {
            headerTitle: "Calculateur de Taille de Conduit HVAC",
            labelVelocity: "Vitesse Maximale:",
            labelFlowRate: "Débit:",
            labelOutputUnit: "Unité de Sortie:",
            circularDuctTitle: "Taille du Conduit Circulaire",
            rectangularDuctTitle: "Taille du Conduit Rectangulaire",
            squareDuctTitle: "Taille du Conduit Carré",
            labelDuctLength: "Longueur du Conduit (en unité sélectionnée):",
            labelDuctPrice: "Prix par Unité de Surface:",
            totalDuctPriceLabel: "Prix Total du Conduit"
        },
        de: {
            headerTitle: "HVAC-Kanalgrößenrechner",
            labelVelocity: "Maximale Geschwindigkeit:",
            labelFlowRate: "Durchflussrate:",
            labelOutputUnit: "Ausgabeeinheit:",
            circularDuctTitle: "Größe des Rundkanals",
            rectangularDuctTitle: "Größe des Rechteckkanals",
            squareDuctTitle: "Größe des Quadratkanals",
            labelDuctLength: "Kanallänge (in ausgewählter Einheit):",
            labelDuctPrice: "Preis pro Flächeneinheit:",
            totalDuctPriceLabel: "Gesamtkanalpreis"
        }
    };

    document.getElementById("ductForm").addEventListener("input", calculateDuctSize);
    document.getElementById("ductLength").addEventListener("input", calculateDuctPrice);
    document.getElementById("ductPrice").addEventListener("input", calculateDuctPrice);

    function selectDuct(duct) {
        selectedDuct = duct;
        updateSelectedDuct();
    }

    function updateSelectedDuct() {
        const cards = document.querySelectorAll(".card");
        cards.forEach(card => card.classList.remove("selected"));
        document.getElementById(selectedDuct).classList.add("selected");
        calculateDuctPrice();
    }

    function calculateDuctSize() {
        const velocity = parseFloat(document.getElementById("velocity").value);
        const velocityUnit = document.getElementById("velocityUnit").value;
        const flowRate = parseFloat(document.getElementById("flowRate").value);
        const flowRateUnit = document.getElementById("flowRateUnit").value;

        if (isNaN(velocity) || isNaN(flowRate) || velocity <= 0 || flowRate <= 0) {

            return;
        }

        // Unit Conversions
        const velocityFpm = velocityUnit === "mps" ? velocity * 196.85 : velocity;
        const flowRateCfm = flowRateUnit === "gpm" ? flowRate * 0.133681 :
            flowRateUnit === "ls" ? flowRate * 2.11888 : flowRate;

        const areaSqFt = flowRateCfm / velocityFpm;
        const areaSqIn = areaSqFt * 144;

        lastResults = {
            areaSqIn,
            diameterIn: (2 * Math.sqrt(areaSqIn / Math.PI)).toFixed(2),
            heightIn: (2 * Math.sqrt(areaSqIn / 2)).toFixed(2),
            widthIn: Math.sqrt(areaSqIn / 2).toFixed(2),
            sideIn: Math.sqrt(areaSqIn).toFixed(2)
        };

        renderResults();
        updateSelectedDuct();
        calculateDuctPrice();
    }

    function renderResults() {
        const outputUnit = document.getElementById("outputUnit").value;
        const conversionFactor = outputUnit === "cm" ? 2.54 : 1;

        document.querySelectorAll(".outputUnitLabel").forEach(label => label.textContent = outputUnit);

        document.getElementById("circularDuctDiameter").textContent = (lastResults.diameterIn * conversionFactor).toFixed(2);
        document.getElementById("circularDuctArea").textContent = (lastResults.areaSqIn * Math.pow(conversionFactor, 2)).toFixed(2);

        // width : height = 1 : 2
        document.getElementById("rectangularDuctHeight").textContent = (lastResults.heightIn * conversionFactor).toFixed(2);
        document.getElementById("rectangularDuctWidth").textContent = (lastResults.widthIn * conversionFactor).toFixed(2);
        document.getElementById("rectangularDuctArea").textContent = (lastResults.areaSqIn * Math.pow(conversionFactor, 2)).toFixed(2);

        document.getElementById("squareDuctSide").textContent = (lastResults.sideIn * conversionFactor).toFixed(2);
        document.getElementById("squareDuctArea").textContent = (lastResults.areaSqIn * Math.pow(conversionFactor, 2)).toFixed(2);
    }

    function calculateDuctPrice() {
        const length = parseFloat(document.getElementById("ductLength").value);
        const pricePerUnit = parseFloat(document.getElementById("ductPrice").value);

        if (isNaN(length) || isNaN(pricePerUnit) || length <= 0 || pricePerUnit <= 0) {
            document.getElementById("totalDuctPrice").textContent = "0";
            return;
        }

        let area;
        if (selectedDuct === "circularDuct") {
            area = lastResults.diameterIn * Math.PI;
        } else if (selectedDuct === "rectangularDuct") {
            area = lastResults.heightIn * lastResults.widthIn;
        } else {
            area = Math.pow(lastResults.sideIn, 2);
        }

        const price = area * length * pricePerUnit;
        document.getElementById("totalDuctPrice").textContent = selectedCurrency + " " + price.toFixed(2);
    }

    function updateCurrency() {
        selectedCurrency = document.getElementById("currency").value;
        calculateDuctPrice();
    }

    function updateLanguage() {
        selectedLanguage = document.getElementById("language").value;
        const translation = translations[selectedLanguage];

        document.getElementById("header-title").textContent = translation.headerTitle;
        document.getElementById("label-velocity").textContent = translation.labelVelocity;
        document.getElementById("label-flowRate").textContent = translation.labelFlowRate;
        document.getElementById("label-outputUnit").textContent = translation.labelOutputUnit;
        document.getElementById("circularDuctTitle").textContent = translation.circularDuctTitle;
        document.getElementById("rectangularDuctTitle").textContent = translation.rectangularDuctTitle;
        document.getElementById("squareDuctTitle").textContent = translation.squareDuctTitle;
        document.getElementById("label-ductLength").textContent = translation.labelDuctLength;
        document.getElementById("label-ductPrice").textContent = translation.labelDuctPrice;
        document.getElementById("totalDuctPriceLabel").textContent = translation.totalDuctPriceLabel;
    }

    calculateDuctSize();
</script>
</body>

</html>